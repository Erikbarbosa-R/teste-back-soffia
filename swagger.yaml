openapi: 3.0.0
info:
  title: CMS API
  description: Sistema de Gerenciamento de Conteúdo - API para gerenciar postagens com títulos, autores, conteúdos e tags
  version: 1.0.0
  contact:
    name: Desenvolvedor
    email: dev@example.com
servers:
  - url: http://localhost:8000/api
    description: Servidor de desenvolvimento
security:
  - BearerAuth: []
paths:
  /auth/login:
    post:
      tags:
        - Autenticação
      summary: Login de usuário
      description: Autentica um usuário com email e senha
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  format: email
                  example: joao.silva@example.com
                password:
                  type: string
                  example: senha123
      responses:
        '200':
          description: Login realizado com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Login realizado com sucesso.
                  user:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                      nome:
                        type: string
                        example: João Silva
                      email:
                        type: string
                        example: joao.silva@example.com
                      telefone:
                        type: string
                        example: "(11) 98765-4321"
                      is_valid:
                        type: boolean
                        example: true
                  token:
                    type: string
                    example: seu-token-jwt-aqui
        '401':
          description: Credenciais inválidas
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Credenciais inválidas. Verifique seu email e senha.

  /auth/register:
    post:
      tags:
        - Autenticação
      summary: Registro de usuário
      description: Registra um novo usuário no sistema
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - nome
                - email
                - password
              properties:
                nome:
                  type: string
                  example: Ana Costa
                email:
                  type: string
                  format: email
                  example: ana.costa@example.com
                password:
                  type: string
                  example: senha123
                telefone:
                  type: string
                  example: "(41) 99877-6655"
      responses:
        '201':
          description: Usuário registrado com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Usuário registrado com sucesso.
                  user:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 4
                      nome:
                        type: string
                        example: Ana Costa
                      email:
                        type: string
                        example: ana.costa@example.com
                      telefone:
                        type: string
                        example: "(41) 99877-6655"
                      is_valid:
                        type: boolean
                        example: true
                  token:
                    type: string
                    example: seu-token-jwt-aqui
        '400':
          description: Erro ao cadastrar usuário
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Erro ao cadastrar o usuário. Verifique os dados fornecidos.

  /auth/logout:
    post:
      tags:
        - Autenticação
      summary: Logout de usuário
      description: Faz logout do usuário autenticado
      responses:
        '200':
          description: Logout realizado com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Logout realizado com sucesso.

  /users:
    get:
      tags:
        - Usuários
      summary: Listar usuários
      description: Lista todos os usuários cadastrados
      parameters:
        - name: per_page
          in: query
          description: Número de itens por página
          required: false
          schema:
            type: integer
            default: 15
      responses:
        '200':
          description: Lista de usuários
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Usuários listados com sucesso.
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                          example: 1
                        nome:
                          type: string
                          example: João Silva
                        email:
                          type: string
                          example: joao.silva@example.com
                        telefone:
                          type: string
                          example: "(11) 98765-4321"
                        is_valid:
                          type: boolean
                          example: true
                  pagination:
                    type: object
                    properties:
                      current_page:
                        type: integer
                        example: 1
                      last_page:
                        type: integer
                        example: 1
                      per_page:
                        type: integer
                        example: 15
                      total:
                        type: integer
                        example: 3

    post:
      tags:
        - Usuários
      summary: Criar usuário
      description: Cria um novo usuário
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - nome
                - email
                - password
              properties:
                nome:
                  type: string
                  example: Ana Costa
                email:
                  type: string
                  format: email
                  example: ana.costa@example.com
                password:
                  type: string
                  example: senha123
                telefone:
                  type: string
                  example: "(41) 99877-6655"
                is_valid:
                  type: boolean
                  example: true
      responses:
        '201':
          description: Usuário criado com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Usuário criado com sucesso.
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 4
                      nome:
                        type: string
                        example: Ana Costa
                      email:
                        type: string
                        example: ana.costa@example.com
                      telefone:
                        type: string
                        example: "(41) 99877-6655"
                      is_valid:
                        type: boolean
                        example: true

  /users/{id}:
    get:
      tags:
        - Usuários
      summary: Buscar usuário
      description: Busca um usuário específico por ID
      parameters:
        - name: id
          in: path
          required: true
          description: ID do usuário
          schema:
            type: integer
            example: 1
      responses:
        '200':
          description: Usuário encontrado
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Success
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                      nome:
                        type: string
                        example: João Silva
                      email:
                        type: string
                        example: joao.silva@example.com
                      telefone:
                        type: string
                        example: "(11) 98765-4321"
                      is_valid:
                        type: boolean
                        example: true
        '404':
          description: Usuário não encontrado
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Usuário não encontrado.

    put:
      tags:
        - Usuários
      summary: Atualizar usuário
      description: Atualiza um usuário existente
      parameters:
        - name: id
          in: path
          required: true
          description: ID do usuário
          schema:
            type: integer
            example: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                nome:
                  type: string
                  example: Ana Costa
                email:
                  type: string
                  format: email
                  example: ana.costa@example.com
                password:
                  type: string
                  example: novaSenha456
                telefone:
                  type: string
                  example: "(41) 99877-6655"
                is_valid:
                  type: boolean
                  example: false
      responses:
        '200':
          description: Usuário atualizado com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Usuário atualizado com sucesso.
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 4
                      nome:
                        type: string
                        example: Ana Costa
                      email:
                        type: string
                        example: ana.costa@example.com
                      telefone:
                        type: string
                        example: "(41) 99877-6655"
                      is_valid:
                        type: boolean
                        example: false
        '404':
          description: Usuário não encontrado
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Usuário não encontrado.

    delete:
      tags:
        - Usuários
      summary: Deletar usuário
      description: Remove um usuário do sistema
      parameters:
        - name: id
          in: path
          required: true
          description: ID do usuário
          schema:
            type: integer
            example: 1
      responses:
        '200':
          description: Usuário removido com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Usuário removido com sucesso.
        '404':
          description: Usuário não encontrado
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Usuário não encontrado.

  /posts:
    get:
      tags:
        - Posts
      summary: Listar posts
      description: Lista todas as postagens cadastradas com filtros opcionais
      parameters:
        - name: per_page
          in: query
          description: Número de itens por página
          required: false
          schema:
            type: integer
            default: 15
        - name: tag
          in: query
          description: Filtrar por tag
          required: false
          schema:
            type: string
            example: node
        - name: query
          in: query
          description: Buscar por título ou conteúdo
          required: false
          schema:
            type: string
            example: palavra-chave
      responses:
        '200':
          description: Lista de posts
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Posts listados com sucesso.
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                          example: 1
                        title:
                          type: string
                          example: Notion
                        author:
                          type: object
                          properties:
                            id:
                              type: integer
                              example: 1
                            nome:
                              type: string
                              example: Nome do Usuario
                            telefone:
                              type: string
                              example: "0000000000"
                            email:
                              type: string
                              example: email@email.com
                        content:
                          type: string
                          example: Sed soluta nemo et consectetur reprehenderit ea reprehenderit sit...
                        tags:
                          type: array
                          items:
                            type: string
                          example: ["organization", "planning", "collaboration", "writing", "calendar"]
                  pagination:
                    type: object
                    properties:
                      current_page:
                        type: integer
                        example: 1
                      last_page:
                        type: integer
                        example: 1
                      per_page:
                        type: integer
                        example: 15
                      total:
                        type: integer
                        example: 3

    post:
      tags:
        - Posts
      summary: Criar post
      description: Cria uma nova postagem
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - title
                - content
                - author
              properties:
                title:
                  type: string
                  example: hotel
                content:
                  type: string
                  example: Local app manager. Start apps within your browser, developer tool with local .localhost domain and https out of the box.
                author:
                  type: integer
                  example: 1
                tags:
                  type: array
                  items:
                    type: string
                  example: ["node", "organizing", "webapps", "domain", "developer", "https", "proxy"]
      responses:
        '201':
          description: Post criado com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Post criado com sucesso.
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 5
                      title:
                        type: string
                        example: hotel
                      author:
                        type: object
                        properties:
                          id:
                            type: integer
                            example: 1
                          nome:
                            type: string
                            example: Nome do Usuario
                          telefone:
                            type: string
                            example: "0000000000"
                          email:
                            type: string
                            example: email@email.com
                      content:
                        type: string
                        example: Local app manager. Start apps within your browser, developer tool with local .localhost domain and https out of the box.
                      tags:
                        type: array
                        items:
                          type: string
                        example: ["node", "organizing", "webapps", "domain", "developer", "https", "proxy"]

  /posts/{id}:
    get:
      tags:
        - Posts
      summary: Buscar post
      description: Busca uma postagem específica por ID
      parameters:
        - name: id
          in: path
          required: true
          description: ID do post
          schema:
            type: integer
            example: 1
      responses:
        '200':
          description: Post encontrado
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Success
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                      title:
                        type: string
                        example: Notion
                      author:
                        type: object
                        properties:
                          id:
                            type: integer
                            example: 1
                          nome:
                            type: string
                            example: Nome do Usuario
                          telefone:
                            type: string
                            example: "0000000000"
                          email:
                            type: string
                            example: email@email.com
                      content:
                        type: string
                        example: Sed soluta nemo et consectetur reprehenderit ea reprehenderit sit...
                      tags:
                        type: array
                        items:
                          type: string
                        example: ["organization", "planning", "collaboration", "writing", "calendar"]
        '404':
          description: Post não encontrado
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Post não encontrado.

    put:
      tags:
        - Posts
      summary: Atualizar post
      description: Atualiza uma postagem existente
      parameters:
        - name: id
          in: path
          required: true
          description: ID do post
          schema:
            type: integer
            example: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                  example: hotel
                content:
                  type: string
                  example: Local app manager. Start apps within your browser, developer tool with local .localhost domain and https out of the box.
                author:
                  type: integer
                  example: 2
                tags:
                  type: array
                  items:
                    type: string
                  example: ["organizing", "webapps", "domain", "developer", "proxy"]
      responses:
        '200':
          description: Post atualizado com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Post atualizado com sucesso.
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 5
                      title:
                        type: string
                        example: hotel
                      author:
                        type: object
                        properties:
                          id:
                            type: integer
                            example: 2
                          nome:
                            type: string
                            example: Nome do Usuario
                          telefone:
                            type: string
                            example: "0000000000"
                          email:
                            type: string
                            example: email@email.com
                      content:
                        type: string
                        example: Local app manager. Start apps within your browser, developer tool with local .localhost domain and https out of the box.
                      tags:
                        type: array
                        items:
                          type: string
                        example: ["organizing", "webapps", "domain", "developer", "proxy"]
        '404':
          description: Post não encontrado
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Post não encontrado.

    delete:
      tags:
        - Posts
      summary: Deletar post
      description: Remove uma postagem do sistema
      parameters:
        - name: id
          in: path
          required: true
          description: ID do post
          schema:
            type: integer
            example: 1
      responses:
        '200':
          description: Post removido com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Post removido com sucesso.
        '404':
          description: Post não encontrado
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Post não encontrado.

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    User:
      type: object
      properties:
        id:
          type: integer
          example: 1
        nome:
          type: string
          example: João Silva
        email:
          type: string
          format: email
          example: joao.silva@example.com
        telefone:
          type: string
          example: "(11) 98765-4321"
        is_valid:
          type: boolean
          example: true
    Post:
      type: object
      properties:
        id:
          type: integer
          example: 1
        title:
          type: string
          example: Notion
        content:
          type: string
          example: Sed soluta nemo et consectetur reprehenderit ea reprehenderit sit...
        author:
          $ref: '#/components/schemas/User'
        tags:
          type: array
          items:
            type: string
          example: ["organization", "planning", "collaboration", "writing", "calendar"]
    Error:
      type: object
      properties:
        message:
          type: string
          example: Error message
        errors:
          type: object
          additionalProperties: true
